### 课程设计 2

​	阅读下面的材料：

​	开机后，CPU 自动进入到 FFFF:0 单元处执行，此处有一条跳转指令。CPU 执行该指令后，转去执行 BIOS 中的硬件系统检测和初始化程序。

​	初始化程序将建立 BIOS 所支持的中断向量，即将 BIOS 提供的中断例程的入口地址登记在中断向量表中。

​	硬件系统检测和初始化完成后，调用 int 19h 进行操作系统的引导。

​	如果设为从软盘启动操作系统，则 int 19h 将主要完成以下工作：

* (1) 控制号 0 号软驱，读取软盘 0 道 0 面 1 扇区的内客到 0:7c00；

* (2) 将 CS:IP 指向 0:7c00。

​	软盘的 0 道 0 面 1 扇区中装有操作系统引导程序。int 19h 将其装载到 0:7c00 处后，设置 CPU 从 0:7c00 开始执行此处的引导程序，操作系统被激活，控制计算机。

​	如果在 0 号软驱中没有软盘，或发生软盘 I/O 错误，则 int 19h 将主要完成以下工作：

​	(1) 读取硬盘 C 的 0 道 0 面 1 扇区的内客到 0:7c00；

​	(2) 将 CS:IP 指向 0:7c00。

​	这次课程设计的任务是编写一个可以自行启动计算机，不需要在现有操作系统环境中运行的程序。

该程序的功能如下。

​	(1)列出功能选项，让用户通过键盘进行选择，界面如下。

​	

```assembly
reset pc 		;(1)重新启动计算机
start system 	;(2)引导现有的操作系统
clock 			;(3)进入时钟程序
set clock 		;(4)设置时间
```

​	(2) 用户输入“1”后重新启动计算机(提示：考虑 ffff:0 单元)。

​	(3) 用户输入“2”后引导现有的操作系统(提示：考虑硬盘 C 的 0 道 0 面 1 扇区)。

​	(4) 用户输入“3”后，执行动态显示当前日期、时间的程序。

​	显示格式如下:`年/月/日 时:分:秒`

​	进入此项功能后，一直动态显示当前的时间，在屏幕上将出现时间按秒变化的效果(提示:循环读取 CMOS)。

当按下 F1 键后，改变显示颜色；按下 Esc 键后，返回到主选单(提示：利用键盘中断)。  

​	(5) 用户输入“4”后可更改当前的日期、时间，更改后返回到主选单(提示：输入字符串)。  

​	下面给出几点建议：  

* (1) 在 DOS 下编写安装程序，在安装程序中包含任务程序；  
* (2) 运行安装程序，将任务程序写到软盘上；  
* (3) 若要任务程序可以在开机后自行执行，要将它写到软盘的 0 道 0 面 1 扇区上。如果程序长度大于 512 个字节，则需要用多个扇区存放，这种情况下，处于软盘 0 道 0 面 1 扇区中的程序就必须负责将其他扇区中的内容读入内存。 

​	这个程序较为复杂，它用到了我们所学到的所有技术，需要进行仔细分析和耐心地调试。这个程序对于我们的整个学习过程是具有总结性的，希望读者能够尽力完成。
